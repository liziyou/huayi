{"remainingRequest":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/vant-demo/vant/vue2/src/view/cart/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Desktop/vant-demo/vant/vue2/src/view/cart/index.vue","mtime":1615541928767},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IENoZWNrYm94LCBDaGVja2JveEdyb3VwLCBDYXJkLCBTdWJtaXRCYXIsIFRvYXN0LCBUYWcsIEJ1dHRvbiwgTmF2QmFyLCBJY29uLCBTdGVwcGVyLCBDZWxsIH0gZnJvbSAndmFudCcKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBbTmF2QmFyLm5hbWVdOiBOYXZCYXIsCiAgICBbSWNvbi5uYW1lXTogSWNvbiwKICAgIFtDYXJkLm5hbWVdOiBDYXJkLAogICAgW0NoZWNrYm94Lm5hbWVdOiBDaGVja2JveCwKICAgIFtTdWJtaXRCYXIubmFtZV06IFN1Ym1pdEJhciwKICAgIFtDaGVja2JveEdyb3VwLm5hbWVdOiBDaGVja2JveEdyb3VwLAogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uLAogICAgW1N0ZXBwZXIubmFtZV06IFN0ZXBwZXIsCiAgICBbQ2VsbC5uYW1lXTogQ2VsbCwKICAgIFtUYWcubmFtZV06IFRhZwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBnb29kRW1wdHk6IHJlcXVpcmUoJy9zdGF0aWMvaW1hZ2VzL2NhcnRFbXB0eS5wbmcnKSwKICAgICAgY2hlY2tlZEdvb2RzOiBbJzEnLCAnMicsICczJ10sCiAgICAgIGFsbENoZWNrZWQ6IGZhbHNlLAogICAgICBzaG93VHlwZTogdHJ1ZSwKICAgICAgZ29vZHM6IFt7CiAgICAgICAgaWQ6ICcxJywKICAgICAgICB0aXRsZTogJ+i/m+WPo+mmmeiViScsCiAgICAgICAgZGVzYzogJ+e6pjI1MGfvvIwy5qC5JywKICAgICAgICBwcmljZTogMjAwLjAwLAogICAgICAgIG51bTogMSwKICAgICAgICB0aHVtYjogJ2h0dHBzOi8vaW1nLnl6Y2RuLmNuL3B1YmxpY19maWxlcy8yMDE3LzEwLzI0LzJmOWEzNjA0NjQ0OWRhZmI4NjA4ZTk5OTkwYjNjMjA1LmpwZWcnCiAgICAgIH0sIHsKICAgICAgICBpZDogJzInLAogICAgICAgIHRpdGxlOiAn6ZmV6KW/6Jyc5qKoJywKICAgICAgICBkZXNjOiAn57qmNjAwZycsCiAgICAgICAgcHJpY2U6IDY5MC4wMCwKICAgICAgICBudW06IDEsCiAgICAgICAgdGh1bWI6ICdodHRwczovL2ltZy55emNkbi5jbi9wdWJsaWNfZmlsZXMvMjAxNy8xMC8yNC9mNmFhYmQ2YWM1NTIxMTk1ZTAxZThlODllZTlmYzYzZi5qcGVnJwogICAgICB9LCB7CiAgICAgICAgaWQ6ICczJywKICAgICAgICB0aXRsZTogJ+e+juWbveS8veWKm+aenCcsCiAgICAgICAgZGVzYzogJ+e6pjY4MGcvM+S4qicsCiAgICAgICAgcHJpY2U6IDI2ODAuMDAsCiAgICAgICAgbnVtOiAxLAogICAgICAgIHRodW1iOiAnaHR0cHM6Ly9pbWcueXpjZG4uY24vcHVibGljX2ZpbGVzLzIwMTcvMTAvMjQvMzIwNDU0MjE2YmJlOWUyNWM3NjUxZTFmYTUxYjMxZmQuanBlZycKICAgICAgfV0KICAgIH0KICB9LAoKICBjb21wdXRlZDogewogICAgc3VibWl0QmFyVGV4dCgpIHsKICAgICAgY29uc3QgY291bnQgPSB0aGlzLmNoZWNrZWRHb29kcy5sZW5ndGgKICAgICAgcmV0dXJuICfnu5PnrpcnICsgKGNvdW50ID8gYCgke2NvdW50fSlgIDogJycpCiAgICB9LAoKICAgIHRvdGFsUHJpY2UoKSB7CiAgICAgIGxldCB0b3RhbCA9IDAKICAgICAgdGhpcy5nb29kcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZEdvb2RzLmluY2x1ZGVzKGl0ZW0uaWQpKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygndG90YWwnKQogICAgICAgICAgdG90YWwgKz0gaXRlbS5wcmljZSAqIDEwMCAqIGl0ZW0ubnVtCiAgICAgICAgICBjb25zb2xlLmxvZyh0b3RhbCkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIGNvbnNvbGUubG9nKCd0b3RhbCcpCiAgICAgIGNvbnNvbGUubG9nKHRvdGFsKQoKICAgICAgcmV0dXJuIHRvdGFsCiAgICB9LAogICAgaXNFbXB0eSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ29vZHMubGVuZ3RoID4gMAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuYWxsQ2hlY2tlZCA9IHRoaXMuY2hlY2tlZEdvb2RzLmxlbmd0aCA9PT0gdGhpcy5nb29kcy5sZW5ndGggJiYgdGhpcy5jaGVja2VkR29vZHMubGVuZ3RoID4gMAogIH0sCiAgbWV0aG9kczogewogICAgZm9ybWF0UHJpY2UocHJpY2UpIHsKICAgICAgcmV0dXJuIChwcmljZSAvIDEwMCkudG9GaXhlZCgyKQogICAgfSwKCiAgICBvblN1Ym1pdCgpIHsKICAgICAgVG9hc3QoJ+eCueWHu+e7k+eulycpCiAgICB9LAogICAgZGVsQ2FydCgpIHsKICAgICAgY29uc29sZS5sb2coJ2hpcy5jaGVja2VkR29vZHMnKQogICAgICBjb25zb2xlLmxvZyh0aGlzLmNoZWNrZWRHb29kcykKICAgICAgY29uc29sZS5sb2codGhpcy5nb29kcykKICAgICAgY29uc3QgYXJyID0gWy4uLnRoaXMuZ29vZHNdLmZpbHRlcih4ID0+IFsuLi50aGlzLmNoZWNrZWRHb29kc10uZXZlcnkoeSA9PiB5ICE9PSB4LmlkKSkKICAgICAgY29uc3QgY2hlY2sgPSBbLi4udGhpcy5jaGVja2VkR29vZHNdLmZpbHRlcih4ID0+IFsuLi5hcnJdLnNvbWUoeSA9PiB5LmlkID09PSB4KSkKICAgICAgY29uc29sZS5sb2coJ2FycicsIGFycikKCiAgICAgIGNvbnNvbGUubG9nKCdhcnInLCBhcnIpCiAgICAgIHRoaXMuc2hvd1R5cGUgPSBmYWxzZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5zaG93VHlwZSA9IHRydWUKICAgICAgICB0aGlzLmdvb2RzID0gYXJyCiAgICAgICAgdGhpcy5jaGVja2VkR29vZHMgPSBjaGVjawogICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IHRoaXMuY2hlY2tlZEdvb2RzLmxlbmd0aCA9PT0gdGhpcy5nb29kcy5sZW5ndGggJiYgdGhpcy5jaGVja2VkR29vZHMubGVuZ3RoID4gMAogICAgICB9KQogICAgfSwKICAgIGhhbmRlbFRvZ2dsZUFsbCgpIHsKICAgICAgdGhpcy4kcmVmcy5jaGVja2JveEdyb3VwLnRvZ2dsZUFsbCh0aGlzLmFsbENoZWNrZWQpCiAgICB9LAogICAgY2hhbmdlR29vZHMoKSB7CiAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmNoZWNrZWRHb29kcycpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hlY2tlZEdvb2RzKQogICAgICBjb25zb2xlLmxvZyh0aGlzLmdvb2RzKQoKICAgICAgdGhpcy5hbGxDaGVja2VkID0gdGhpcy5jaGVja2VkR29vZHMubGVuZ3RoID09PSB0aGlzLmdvb2RzLmxlbmd0aCAmJiB0aGlzLmNoZWNrZWRHb29kcy5sZW5ndGggPiAwCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/cart","sourcesContent":["<template>\n  <div class=\"cart\">\n    <van-nav-bar title=\"购物车\" :fixed=\"true\">\n      <!-- <van-icon slot=\"left\" name=\"gift-o\" /> -->\n      <van-icon v-if=\"checkedGoods.length > 0\" slot=\"right\" @click=\"delCart\">删除</van-icon>\n    </van-nav-bar>\n    <van-checkbox-group v-if=\"showType\" ref=\"checkboxGroup\" v-model=\"checkedGoods\" class=\"card-goods\" @change=\"changeGoods\">\n      <van-cell\n        v-for=\"item in goods\"\n        :key=\"item.id\"\n        class=\"card-goods-item\"\n      >\n        <van-checkbox\n          class=\"card-goods__item\"\n          :name=\"item.id\"\n        />\n        <van-card\n          :price=\"item.price.toFixed(2) + ''\"\n          :desc=\"item.desc\"\n          :title=\"item.title\"\n          :thumb=\"item.thumb\"\n        >\n          <template #footer>\n            <van-stepper v-model=\"item.num\" integer min=\"1\" input-width=\"40px\" />\n          </template>\n        </van-card>\n      </van-cell>\n      <van-cell\n        v-if=\"goods.length < 1\"\n        class=\"card-goods-item-empty\"\n      >\n        <div class=\"img-box\">\n          <img :src=\"goodEmpty\">\n        </div>\n        <div class=\"txt\">\n          <p>购物车空空如也，去选购一些商品吧～～</p>\n          <van-button round url=\"/\" color=\"linear-gradient(to right, #ff6034, #ee0a24)\">去首页</van-button>\n        </div>\n      </van-cell>\n    </van-checkbox-group>\n    <van-submit-bar\n      v-if=\"isEmpty\"\n      :price=\"totalPrice\"\n      :disabled=\"!checkedGoods.length\"\n      :button-text=\"submitBarText\"\n      @submit=\"onSubmit\"\n    >\n      <van-checkbox v-model=\"allChecked\" @click=\"handelToggleAll\">全选</van-checkbox></van-submit-bar>\n  </div>\n</template>\n\n<script>\nimport { Checkbox, CheckboxGroup, Card, SubmitBar, Toast, Tag, Button, NavBar, Icon, Stepper, Cell } from 'vant'\n\nexport default {\n  components: {\n    [NavBar.name]: NavBar,\n    [Icon.name]: Icon,\n    [Card.name]: Card,\n    [Checkbox.name]: Checkbox,\n    [SubmitBar.name]: SubmitBar,\n    [CheckboxGroup.name]: CheckboxGroup,\n    [Button.name]: Button,\n    [Stepper.name]: Stepper,\n    [Cell.name]: Cell,\n    [Tag.name]: Tag\n  },\n\n  data() {\n    return {\n      goodEmpty: require('/static/images/cartEmpty.png'),\n      checkedGoods: ['1', '2', '3'],\n      allChecked: false,\n      showType: true,\n      goods: [{\n        id: '1',\n        title: '进口香蕉',\n        desc: '约250g，2根',\n        price: 200.00,\n        num: 1,\n        thumb: 'https://img.yzcdn.cn/public_files/2017/10/24/2f9a36046449dafb8608e99990b3c205.jpeg'\n      }, {\n        id: '2',\n        title: '陕西蜜梨',\n        desc: '约600g',\n        price: 690.00,\n        num: 1,\n        thumb: 'https://img.yzcdn.cn/public_files/2017/10/24/f6aabd6ac5521195e01e8e89ee9fc63f.jpeg'\n      }, {\n        id: '3',\n        title: '美国伽力果',\n        desc: '约680g/3个',\n        price: 2680.00,\n        num: 1,\n        thumb: 'https://img.yzcdn.cn/public_files/2017/10/24/320454216bbe9e25c7651e1fa51b31fd.jpeg'\n      }]\n    }\n  },\n\n  computed: {\n    submitBarText() {\n      const count = this.checkedGoods.length\n      return '结算' + (count ? `(${count})` : '')\n    },\n\n    totalPrice() {\n      let total = 0\n      this.goods.map(item => {\n        if (this.checkedGoods.includes(item.id)) {\n          console.log('total')\n          total += item.price * 100 * item.num\n          console.log(total)\n        }\n      })\n      console.log('total')\n      console.log(total)\n\n      return total\n    },\n    isEmpty() {\n      return this.goods.length > 0\n    }\n  },\n  created() {\n    this.allChecked = this.checkedGoods.length === this.goods.length && this.checkedGoods.length > 0\n  },\n  methods: {\n    formatPrice(price) {\n      return (price / 100).toFixed(2)\n    },\n\n    onSubmit() {\n      Toast('点击结算')\n    },\n    delCart() {\n      console.log('his.checkedGoods')\n      console.log(this.checkedGoods)\n      console.log(this.goods)\n      const arr = [...this.goods].filter(x => [...this.checkedGoods].every(y => y !== x.id))\n      const check = [...this.checkedGoods].filter(x => [...arr].some(y => y.id === x))\n      console.log('arr', arr)\n\n      console.log('arr', arr)\n      this.showType = false\n      this.$nextTick(() => {\n        this.showType = true\n        this.goods = arr\n        this.checkedGoods = check\n        this.allChecked = this.checkedGoods.length === this.goods.length && this.checkedGoods.length > 0\n      })\n    },\n    handelToggleAll() {\n      this.$refs.checkboxGroup.toggleAll(this.allChecked)\n    },\n    changeGoods() {\n      console.log('this.checkedGoods')\n      console.log(this.checkedGoods)\n      console.log(this.goods)\n\n      this.allChecked = this.checkedGoods.length === this.goods.length && this.checkedGoods.length > 0\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.card-goods {\n  padding: 10px 0;\n  background-color: #fafafa;\n  margin-top: 36px;\n  &-item {\n    background: #fafafa;\n     .van-cell__value--alone {\n       display: flex;\n    }\n    .van-card {\n      flex: 1;\n    }\n    &-empty {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background: #fafafa;\n      margin-top: 60px;\n      .img-box,.txt {\n        justify-content: center;\n        align-items: center;\n        display: flex;\n      }\n      .txt {\n        flex-direction: column;\n        button {\n          width: 40%;\n          margin-top: 30px;\n        }\n      }\n    }\n\n  }\n  &__item {\n    position: relative;\n    background-color: #fafafa;\n    .van-checkbox__label {\n      width: 100%;\n      height: auto; // temp\n      padding: 0 10px 0 15px;\n      box-sizing: border-box;\n    }\n\n    .van-checkbox__icon {\n    }\n\n    .van-card__price {\n      color: #f44;\n    }\n  }\n}\n.cart{\n  .van-submit-bar {\n    bottom: 50px;\n    border-bottom: #eaeaea 1px solid;\n  }\n}\n</style>\n"]}]}