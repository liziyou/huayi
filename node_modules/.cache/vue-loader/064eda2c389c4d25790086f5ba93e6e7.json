{"remainingRequest":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/vant-demo/vant/vue2/src/view/goods/classify.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Desktop/vant-demo/vant/vue2/src/view/goods/classify.vue","mtime":1615261241969},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgUHVsbFJlZnJlc2gsCiAgQ2VsbCwKICBMaXN0LAogIENlbGxHcm91cAp9IGZyb20gJ3ZhbnQnCmltcG9ydCBvbmVGaXZlRm91ciBmcm9tICcuLi8uLi8uLi9zdGF0aWMvYmpzb24vMTU0Lmpzb24nCmltcG9ydCBmaXZlRml2ZSBmcm9tICcuLi8uLi8uLi9zdGF0aWMvYmpzb24vNTUuanNvbicKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFtMaXN0Lm5hbWVdOiBMaXN0LAogICAgW0NlbGwubmFtZV06IENlbGwsCiAgICBbUHVsbFJlZnJlc2gubmFtZV06IFB1bGxSZWZyZXNoCiAgfSwKICBwcm9wczogewogICAgY3VycmVudFNpZGViYXI6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBsYXN0TGlzdDogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIHJlZnJlc2hpbmc6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgc2liYUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBpZDogMTU0LAogICAgICAgICAgZGF0YTogb25lRml2ZUZvdXIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiA1NSwKICAgICAgICAgIGRhdGE6IGZpdmVGaXZlCiAgICAgICAgfQogICAgICBdCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudFNpZGViYXIodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCd2YWwsb2xkJykKICAgICAgY29uc29sZS5sb2codmFsKQogICAgICB0aGlzLmxpc3QgPSBbXQogICAgICB0aGlzLmxhc3RMaXN0ID0gW10KICAgICAgdGhpcy5vbkxvYWQoKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25Mb2FkKCkgewogICAgICBjb25zb2xlLmxvZygnc2liYUxpc3QnKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnNpYmFMaXN0KQogICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRTaWRlYmFyKQogICAgICBjb25zdCBmaW5kQ3VycmVudCA9IHRoaXMuc2liYUxpc3QuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gdGhpcy5jdXJyZW50U2lkZWJhci5DYXRlZ29yeUlkKQogICAgICBjb25zb2xlLmxvZygnZmluZEN1cnJlbnQnKQogICAgICBjb25zb2xlLmxvZyhmaW5kQ3VycmVudCkKICAgICAgdGhpcy5sYXN0TGlzdCA9IFtdCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0aGlzLnJlZnJlc2hpbmcpIHsKICAgICAgICAgIHRoaXMubGlzdCA9IFtdCiAgICAgICAgICB0aGlzLnJlZnJlc2hpbmcgPSBmYWxzZQogICAgICAgIH0KICAgICAgICBjb25zdCBjdXJyZW50RGF0YSA9IGZpbmRDdXJyZW50LmRhdGEuRGF0YS5Hb29kc0xpc3QgfHwgW10KICAgICAgICBjb25zdCBhcnJMZW5ndGggPSBjdXJyZW50RGF0YS5sZW5ndGggLy8g5pWw57uE6ZW/5bqmCiAgICAgICAgY29uc3QgbnVtID0gMTAgLy8g5q+P6aG15pi+56S6IDEwIOadoQogICAgICAgIGxldCBpbmRleCA9IDAKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoaSAlIG51bSA9PT0gMCAmJiBpICE9PSAwKSB7IC8vIOWPr+S7peiiqyAxMCDmlbTpmaQKICAgICAgICAgICAgdGhpcy5saXN0LnB1c2goY3VycmVudERhdGEuc2xpY2UoaW5kZXgsIGkpKQogICAgICAgICAgICBpbmRleCA9IGkKICAgICAgICAgIH0KICAgICAgICAgIGlmICgoaSArIDEpID09PSBhcnJMZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5saXN0LnB1c2goY3VycmVudERhdGEuc2xpY2UoaW5kZXgsIChpICsgMSkpKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmxpc3QnKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdCkKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMubGlzdFtpXScpCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3RbaV0pCiAgICAgICAgICB0aGlzLmxhc3RMaXN0ID0gdGhpcy5sYXN0TGlzdC5jb25jYXQodGhpcy5saXN0W2ldKQogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygnbGFzdExpc3QnKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGFzdExpc3QpCiAgICAgICAgaWYgKHRoaXMubGFzdExpc3QubGVuZ3RoID49IGFyckxlbmd0aCkgewogICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWUKICAgICAgICB9CiAgICAgIH0sIDEwMDApCiAgICB9LAogICAgb25SZWZyZXNoKCkgewogICAgICAvLyDmuIXnqbrliJfooajmlbDmja4KICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlCgogICAgICAvLyDph43mlrDliqDovb3mlbDmja4KICAgICAgLy8g5bCGIGxvYWRpbmcg6K6+572u5Li6IHRydWXvvIzooajnpLrlpITkuo7liqDovb3nirbmgIEKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLm9uTG9hZCgpCiAgICB9LAogICAgZmlsdGVySW1nKGltZ3MgPSBbXSkgewogICAgICBjb25zdCBpbWdEYXRhID0gaW1ncy5zcGxpdCgnLCcpCiAgICAgIHJldHVybiBpbWdEYXRhLmxlbmd0aCA+IDAgPyBpbWdEYXRhWzBdIDogJycKICAgIH0sCiAgICBmb3JtYXRQcmljZShwcmljZSA9IDApIHsKICAgICAgY29uc3QgYSA9IHByaWNlLnRvRml4ZWQoMikudG9Mb2NhbGVTdHJpbmcoKQogICAgICByZXR1cm4gYQogICAgfSwKICAgIGdvRGV0YWlsKGl0ZW0pIHsKICAgICAgY29uc29sZS5sb2coJ2l0ZW0nKQogICAgICBjb25zb2xlLmxvZyhpdGVtKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdkZXRhaWwnLCBxdWVyeTogeyBQcm9JZDogaXRlbS5Qcm9JZCB9fSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["classify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"classify.vue","sourceRoot":"src/view/goods","sourcesContent":["<template>\n  <div>\n    <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        @load=\"onLoad\"\n      >\n        <van-cell v-for=\"(item) in lastList\" :key=\"item.ProId\" class=\"classify-list\" @click=\"goDetail(item)\">\n          <template #left-icon />\n          <!-- 使用 title 插槽来自定义标题 -->\n          <template #title>\n            <img :src=\"filterImg(item.Images)\">\n            <div class=\"list-title\">\n              <div class=\"name\">{{ item.ProName }}</div>\n              <div class=\"specStr\">\n                <span>规格：{{ item.SpecStr }}</span>\n              </div>\n              <div class=\"price\">¥ <span>{{ formatPrice(item.ProPrice) }}</span></div>\n            </div>\n          </template>\n        </van-cell>\n        <template #finished>\n          <div v-if=\"lastList.length>0\">没有更多了</div>\n          <div v-else>暂无数据</div>\n        </template>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n<script>\nimport {\n  PullRefresh,\n  Cell,\n  List,\n  CellGroup\n} from 'vant'\nimport oneFiveFour from '../../../static/bjson/154.json'\nimport fiveFive from '../../../static/bjson/55.json'\nexport default {\n  components: {\n    [List.name]: List,\n    [Cell.name]: Cell,\n    [PullRefresh.name]: PullRefresh\n  },\n  props: {\n    currentSidebar: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data() {\n    return {\n      list: [],\n      lastList: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      currentPage: 1,\n      sibaList: [\n        {\n          id: 154,\n          data: oneFiveFour\n        },\n        {\n          id: 55,\n          data: fiveFive\n        }\n      ]\n    }\n  },\n  watch: {\n    currentSidebar(val) {\n      console.log('val,old')\n      console.log(val)\n      this.list = []\n      this.lastList = []\n      this.onLoad()\n    }\n  },\n  methods: {\n    onLoad() {\n      console.log('sibaList')\n      console.log(this.sibaList)\n      console.log(this.currentSidebar)\n      const findCurrent = this.sibaList.find((item) => item.id === this.currentSidebar.CategoryId)\n      console.log('findCurrent')\n      console.log(findCurrent)\n      this.lastList = []\n      setTimeout(() => {\n        if (this.refreshing) {\n          this.list = []\n          this.refreshing = false\n        }\n        const currentData = findCurrent.data.Data.GoodsList || []\n        const arrLength = currentData.length // 数组长度\n        const num = 10 // 每页显示 10 条\n        let index = 0\n        for (let i = 0; i < arrLength; i++) {\n          if (i % num === 0 && i !== 0) { // 可以被 10 整除\n            this.list.push(currentData.slice(index, i))\n            index = i\n          }\n          if ((i + 1) === arrLength) {\n            this.list.push(currentData.slice(index, (i + 1)))\n          }\n        }\n        this.loading = false\n        console.log('this.list')\n        console.log(this.list)\n        for (let i = 0; i < this.list.length; i++) {\n          console.log('this.list[i]')\n          console.log(this.list[i])\n          this.lastList = this.lastList.concat(this.list[i])\n        }\n        console.log('lastList')\n        console.log(this.lastList)\n        if (this.lastList.length >= arrLength) {\n          this.finished = true\n        }\n      }, 1000)\n    },\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false\n\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true\n      this.onLoad()\n    },\n    filterImg(imgs = []) {\n      const imgData = imgs.split(',')\n      return imgData.length > 0 ? imgData[0] : ''\n    },\n    formatPrice(price = 0) {\n      const a = price.toFixed(2).toLocaleString()\n      return a\n    },\n    goDetail(item) {\n      console.log('item')\n      console.log(item)\n      this.$router.push({ name: 'detail', query: { ProId: item.ProId }})\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.classify-list {\n  .van-cell__title {\n    display: flex;\n    img {\n      width: 80px;\n      height: 80px;\n    }\n  .list-title {\n    display: flex;\n    flex-flow: column;\n    .name {\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 2;\n      overflow: hidden;\n      word-break: break-all;\n      color: #333;\n     line-height: 20px;\n    }\n    .specStr {\n      span{\n        display: inline-block;\n        padding: 2px 4px;\n        margin-top: 4px;\n        line-height: 1;\n        font-size: 12px;\n        border-radius: 4px;\n        background: #F8F9FB;\n      }\n    }\n    .price {\n      font-size: 12px;\n      color: #FE3A3B;\n      span{\n        font-size: 16px;\n      }\n    }\n   }\n  }\n\n}\n</style>\n"]}]}