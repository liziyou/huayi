{"remainingRequest":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Desktop/vant-demo/vant/vue2/src/view/goods/classify.vue?vue&type=style&index=0&id=0f533bfe&lang=less&scoped=true&","dependencies":[{"path":"/Users/user/Desktop/vant-demo/vant/vue2/src/view/goods/classify.vue","mtime":1615279742928},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/vant-demo/vant/vue2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jbGFzc2lmeS1saXN0IHsKICAudmFuLWNlbGxfX3RpdGxlIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBpbWcgewogICAgICB3aWR0aDogODBweDsKICAgICAgaGVpZ2h0OiA4MHB4OwogICAgfQogIC5saXN0LXRpdGxlIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWZsb3c6IGNvbHVtbjsKICAgIC5uYW1lIHsKICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7CiAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgd29yZC1icmVhazogYnJlYWstYWxsOwogICAgICBjb2xvcjogIzMzMzsKICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgIH0KICAgIC5zcGVjU3RyIHsKICAgICAgc3BhbnsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgcGFkZGluZzogMnB4IDRweDsKICAgICAgICBtYXJnaW4tdG9wOiA0cHg7CiAgICAgICAgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICBiYWNrZ3JvdW5kOiAjRjhGOUZCOwogICAgICB9CiAgICB9CiAgICAucHJpY2UgewogICAgICBmb250LXNpemU6IDEycHg7CiAgICAgIGNvbG9yOiAjRkUzQTNCOwogICAgICBzcGFuewogICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgfQogICAgfQogICB9CiAgfQoKfQo="},{"version":3,"sources":["classify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"classify.vue","sourceRoot":"src/view/goods","sourcesContent":["<template>\n  <div>\n    <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        @load=\"onLoad\"\n      >\n        <van-cell v-for=\"(item) in lastList\" :key=\"item.ProId\" class=\"classify-list\" @click=\"goDetail(item)\">\n          <template #left-icon />\n          <!-- 使用 title 插槽来自定义标题 -->\n          <template #title>\n            <img :src=\"filterImg(item.Images)\">\n            <div class=\"list-title\">\n              <div class=\"name\">{{ item.ProName }}</div>\n              <div class=\"specStr\">\n                <span>规格：{{ item.SpecStr }}</span>\n              </div>\n              <div class=\"price\">¥ <span>{{ formatPrice(item.ProPrice) }}</span></div>\n            </div>\n          </template>\n        </van-cell>\n        <template #finished>\n          <div v-if=\"lastList.length>0\">没有更多了</div>\n          <div v-else>暂无数据</div>\n        </template>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n<script>\nimport {\n  PullRefresh,\n  Cell,\n  List,\n  CellGroup\n} from 'vant'\nimport oneFiveFour from '../../../static/bjson/154.json'\nimport fiveFive from '../../../static/bjson/55.json'\nexport default {\n  components: {\n    [List.name]: List,\n    [Cell.name]: Cell,\n    [PullRefresh.name]: PullRefresh\n  },\n  props: {\n    currentSidebar: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data() {\n    return {\n      list: [],\n      lastList: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      currentPage: 1,\n      sibaList: [\n        {\n          id: 154,\n          data: oneFiveFour\n        },\n        {\n          id: 55,\n          data: fiveFive\n        }\n      ]\n    }\n  },\n  watch: {\n    currentSidebar(val) {\n      console.log('val,old')\n      console.log(val)\n      this.list = []\n      this.lastList = []\n      this.loading = true\n      this.finished = false\n      this.onLoad()\n    }\n  },\n  methods: {\n    onLoad() {\n      console.log('sibaList')\n      console.log(this.sibaList)\n      console.log(this.currentSidebar)\n      const findCurrent = this.sibaList.find((item) => item.id === this.currentSidebar.CategoryId)\n      console.log('findCurrent')\n      console.log(findCurrent)\n      this.lastList = []\n      setTimeout(() => {\n        if (this.refreshing) {\n          this.list = []\n          this.refreshing = false\n        }\n        const currentData = findCurrent.data.Data.GoodsList || []\n        const arrLength = currentData.length // 数组长度\n        const num = 10 // 每页显示 10 条\n        let index = 0\n        for (let i = 0; i < arrLength; i++) {\n          if (i % num === 0 && i !== 0) { // 可以被 10 整除\n            this.list.push(currentData.slice(index, i))\n            index = i\n          }\n          if ((i + 1) === arrLength) {\n            this.list.push(currentData.slice(index, (i + 1)))\n          }\n        }\n        this.loading = false\n        console.log('this.list')\n        console.log(this.list)\n        for (let i = 0; i < this.list.length; i++) {\n          console.log('this.list[i]')\n          console.log(this.list[i])\n          this.lastList = this.lastList.concat(this.list[i])\n        }\n        console.log('lastList')\n        console.log(this.lastList)\n        if (this.lastList.length >= arrLength) {\n          this.finished = true\n        }\n      }, 1000)\n    },\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false\n\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true\n      this.onLoad()\n    },\n    filterImg(imgs = []) {\n      const imgData = imgs.split(',')\n      return imgData.length > 0 ? imgData[0] : ''\n    },\n    formatPrice(price = 0) {\n      const a = price.toFixed(2).toLocaleString()\n      return a\n    },\n    goDetail(item) {\n      console.log('item')\n      console.log(item)\n      this.$router.push({ name: 'detail', query:\n      {\n        ProId: item.ProId,\n        CategoryId: this.currentSidebar.CategoryId\n      }})\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.classify-list {\n  .van-cell__title {\n    display: flex;\n    img {\n      width: 80px;\n      height: 80px;\n    }\n  .list-title {\n    display: flex;\n    flex-flow: column;\n    .name {\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 2;\n      overflow: hidden;\n      word-break: break-all;\n      color: #333;\n     line-height: 20px;\n    }\n    .specStr {\n      span{\n        display: inline-block;\n        padding: 2px 4px;\n        margin-top: 4px;\n        line-height: 1;\n        font-size: 12px;\n        border-radius: 4px;\n        background: #F8F9FB;\n      }\n    }\n    .price {\n      font-size: 12px;\n      color: #FE3A3B;\n      span{\n        font-size: 16px;\n      }\n    }\n   }\n  }\n\n}\n</style>\n"]}]}